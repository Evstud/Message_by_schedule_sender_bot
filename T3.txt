Требуется бот, который будет производить отправку сообщений в группу (в том числе содержащих картинки) по расписанию.

Управление ботом должно выполняться при помощи личных сообщений этому же боту от администратора, заданного в настройках бота.

Расписание должно задаваться в cron-формате.

При этом бот должен работать совместно с агрегатором сообщений из разных мессенджеров Jivo - чтобы позволять оператору общаться с любым написавшим через бот. Пример: https://www.jivo.ru/help/integrations/podkluchenie-integracii-s-telegram.html


Предыдущие исполнители не справились с задачей.

Прошу ознакомиться с более подробным описанием и выполненной частью работы.


Сообщения должны отправлться в группу, заданную в конфиге бота.

Управление должно осуществляться администратором, заданным в конфиге бота.

Ошибки, уведомления должны отоправляться в диалог с администратором бота.

Дивлог с администратором:

Главное меню

В меню доступны кнопки Создать задачу и Все задачи.

Меню Создать задачу

В меню доступны кнопки Сохранить и Главное меню.

Вводится название задачи.

Отправлятся сообщение, которое может содержать картинку, текст и другие файлы.

Водится расписание отправки в формате Cron.

Меню Все задачи

В меню доступны кнопка Главное меню.

Выводится список задач и расписания публикации и статус (включено, выключено). Под Каждой задачей отображаются кнопки - Показать, Включить или Выключить (в зависимости от статуса), Изменить расписание, Удалить.

Кнопка Показать

Выводится публикуемое сообщение и следующим сообщением - расписание, под ним кнопки - Включить или Выключить (в зависимости от статуса), Изменить расписание, Удалить.

Меню Изменить расписание

Вводится расписание отправки в формате Cron.

В меню доступны кнопки Сохранить и Главное меню.


* * * * * выполняемая команда

- - - - -

| | | | |

| | | | ----- день недели (0—7) (воскресенье = 0 или 7)

| | | ------- месяц (1—12)

| | --------- день месяца (1—31)

| ----------- час (0—23)

------------- минута (0—59)


#### Здесь начинаются задания

 # выполнять каждый день в 0 часов 5 минут, результат складывать в log/daily

 5 0 * * * $HOME/bin/daily.job >> $HOME/log/daily 2>&1

 # выполнять 1 числа каждого месяца в 14 часов 15 минут

 15 14 1 * * $HOME/bin/monthly

 # каждый рабочий день в 22:00

 0 22 * * 1-5 echo "Пора домой" | mail -s "Уже 22:00" john

 

 23 */2 * * * echo "Выполняется в 0:23, 2:23, 4:23 и т. д."

 5 4 * * sun echo "Выполняется в 4:05 в воскресенье"

 0 0 1 1 * echo "С новым годом!"

 15 10,13 * * 1,4 echo "Эта надпись выводится в понедельник и четверг в 10:15 и 13:15"

 0-59 * * * * echo "Выполняется ежеминутно"

 0-59/2 * * * * echo "Выполняется по чётным минутам"

 1-59/2 * * * * echo "Выполняется по нечётным минутам"

 # каждые 5 минут

 */5 * * * * echo "Прошло пять минут"

 # каждое первое воскресенье каждого месяца. -eq 7 это код дня недели, т. е. 1 -> понедельник , 2 -> вторник и т. д.

 0 1 1-7 * * [ "$(date '+\%u')" -eq 7 ] && echo "Эта надпись выводится каждое первое воскресенье каждого месяца в 1:00"

Смысл в том, что задается расписание, а не разовое время

https://github.com/kiorky/croniter

Можно, например, такую библиотеку использовать

